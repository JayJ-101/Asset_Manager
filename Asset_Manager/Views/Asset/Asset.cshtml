@model AssetViewModel

@{
    var action = ViewContext.RouteData.Values["action"]!.ToString()!.Capitalize();
    ViewData["Title"] = $"  {action} Assets";
}



<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-12 col-md-8 col-lg-6 col-xl-5">
            <div class="card shadow-sm">
                <div class="card-body">

                    <form asp-action="@action" asp-area="" method="post">
                        <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

                        @* AssetID needed by both delete and edit *@
                        <input type="hidden" asp-for="Asset.AssetId" />

                        @* Operation field needed by remote validation *@
                        <input type="hidden" name="Operation" value="@action" />

                        @if (action.EqualsNoCase("delete"))
                        {
                            <h5>Are you sure you want to delete this Asset?</h5>
                            <p><strong>Asset Name:</strong> @Model.Asset.AssetName</p>
                            <p><strong>Serial Number:</strong> @Model.Asset.SerialNumber</p>

                        }
                        else
                        {

                            <div class="row mb-2">
                                <label asp-for="Asset.Manufacturer" class="col-form-label col-md-4">Manufacturer:</label>
                                <div class="col-md-8">
                                    <input type="text" asp-for="Asset.Manufacturer" class="form-control" />
                                </div>
                                <div class="col">
                                    <span asp-validation-for="Asset.Manufacturer" class="text-danger"></span>
                                </div>
                            </div>
                            <div class="row mb-2">
                                <label asp-for="Asset.Model" class="col-form-label col-md-4">Model:</label>
                                <div class="col-md-8">
                                    <input type="text" asp-for="Asset.Model" class="form-control" />
                                </div>
                                <div class="col">
                                    <span asp-validation-for="Asset.Model" class="text-danger"></span>
                                </div>
                            </div>
                            <div class="row mb-2">
                                <label class="col-form-label col-md-4">Category:</label>
                                <div class="col-md-8">
                                    <select asp-for="SelectedCategoryId" class="form-control"
                                            asp-items="@(new SelectList(Model.Categories, "CategoryId", "CategoryName"))"
                                            required>
                                        <option value="">-- Select Category --</option>
                                    </select>

                                </div>
                                <div class="col">
                                    <span asp-validation-for="Asset.CategoryId" class="text-danger"></span>
                                </div>
                            </div>





                            <div class="row mb-2">
                                <label asp-for="Asset.AssetName" class="col-form-label col-md-4">Asset Tag:</label>
                                <div class="col-md-8">
                                    <input type="text" asp-for="Asset.AssetName" class="form-control" readonly />
                                    <small class="text-mute">Auto-geberated when saving</small>
                                </div>
                                <div class="col">
                                    <span asp-validation-for="Asset.AssetName" class="text-danger"></span>
                                </div>
                            </div>



                            <div class="row mb-2">
                                <label asp-for="Asset.SerialNumber" class="col-form-label col-md-4">Serial Number:</label>
                                <div class="col-md-8">
                                    <input type="text" asp-for="Asset.SerialNumber" class="form-control" />
                                    <span asp-validation-for="Asset.SerialNumber" class="text-danger"></span>
                                </div>
                            </div>

                            <div class="row mb-2">
                                <label class="col-form-label col-md-4">Supplier  :</label>
                                <div class="col-md-8">
                                    <select asp-for="Asset.SupplierId" class="form-select"
                                            asp-items='@new SelectList(Model.Suppliers, "SupplierId", "SupplierName", Model.Asset.SupplierId)'>
                                        <option value="">-- Select Supplier --</option>
                                    </select>
                                </div>
                                <div class="col">
                                    <span asp-validation-for="Asset.SupplierId" class="text-danger"></span>
                                </div>
                            </div>


                            <div class="row mb-2">
                                <label class="col-form-label col-md-4">Status:</label>
                                <div class="col-md-8">
                                    <select asp-for="Asset.Status" class="form-select">
                                        <option value="">Select Status</option>
                                        <option value="Available">Available</option>
                                        <option value="In Use">In Use</option>
                                        <option value="Under Maintenance">Under Maintenance</option>
                                        <option value="Retired">Retired</option>
                                    </select>
                                </div>
                                <div class="col">
                                    <span asp-validation-for="Asset.Status" class="text-danger"></span>
                                </div>
                            </div>

                            <div class="row mb-2">
                                <label class="col-form-label col-md-4">Purchase Date:</label>
                                <div class="col-md-8">
                                    <input type="date" asp-for="Asset.PurchaseDate" class="form-control" />
                                </div>
                            </div>

                            <div class="row mb-2">
                                <label class="col-form-label col-md-4">Warranty Expiry Date:</label>
                                <div class="col-md-8">
                                    <input type="date" asp-for="Asset.WarrantyExpiryDate" class="form-control" />
                                </div>
                            </div>
                        }



                        <div class="row">
                            <div class="@(action.EqualsNoCase("delete") ? "mt-2" : "offset-md-2")">
                                <button type="submit" class="btn btn-primary">@action</button>
                                <a asp-action="Index" class="btn btn-secondary">Cancel</a>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>



@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
<script>
    $(document).ready(function () {
        $('.category-select').select2({
            placeholder: "Select a category",
            allowClear: true,
            width: '100%'
        });
    });
</script>
